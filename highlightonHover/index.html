<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hightlight</title>
    <style>
        body {
            background-image: linear-gradient(to right bottom, lightblue, lightcoral );
            background-repeat: no-repeat;
            background-size: cover;
            min-height: 100vh;
            padding: 5rem;
        }

        ul {
            list-style: none;
            display: flex;
        }

        ul > li {
            margin:0 8rem 2rem 0;
            font-size: 18px;
        }

        a {
            text-decoration: none;
            color: purple;
            cursor: pointer;
        }

        p {
            font-size: 20px;
            line-height: 1.6;
        }

        .highlight {
            background-color: #fff;
            transition: all 0.2s;
            position: absolute;
            top:0;
            left: 0;
            z-index: -1;
            display: block;
            border-radius: 4px;
        }

    </style>
</head>

<body>

    <header class="header">
        <nav class="header__nav">
            <ul>
                <li><a href="#" class="nav-item">nav 1</a></li>
                <li><a href="#" class="nav-item">nav 2</a></li>
                <li><a href="#" class="nav-item">nav 3</a></li>
                <li><a href="#" class="nav-item">nav 4</a></li>
            </ul>
        </nav>
    </header>
    <p>
        Lorem ipsum dolor sit amet, <a>consectetur</a> adipisicing elit, sed do eiusmod tempor <a>incididunt</a> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut <a>aliquip</a> ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum <a>dolore</a> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>

    <p>
        Lorem ipsum dolor sit amet, <a>consectetur</a> adipisicing elit, sed do eiusmod tempor <a>incididunt</a> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut <a>aliquip</a> ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum <a>dolore</a> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>

    <p>
        Lorem ipsum dolor sit amet, <a>consectetur</a> adipisicing elit, sed do eiusmod tempor <a>incididunt</a> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut <a>aliquip</a> ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum <a>dolore</a> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>

    <p>
        Lorem ipsum dolor sit amet, <a>consectetur</a> adipisicing elit, sed do eiusmod tempor <a>incididunt</a> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut <a>aliquip</a> ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum <a>dolore</a> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>

    <p>
        Lorem ipsum dolor sit amet, <a>consectetur</a> adipisicing elit, sed do eiusmod tempor <a>incididunt</a> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut <a>aliquip</a> ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum <a>dolore</a> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>

    <p>
        Lorem ipsum dolor sit amet, <a>consectetur</a> adipisicing elit, sed do eiusmod tempor <a>incididunt</a> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut <a>aliquip</a> ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum <a>dolore</a> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
    <p>
        Lorem ipsum dolor sit amet, <a>consectetur</a> adipisicing elit, sed do eiusmod tempor <a>incididunt</a> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut <a>aliquip</a> ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum <a>dolore</a> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
    <p>
        Lorem ipsum dolor sit amet, <a>consectetur</a> adipisicing elit, sed do eiusmod tempor <a>incididunt</a> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut <a>aliquip</a> ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum <a>dolore</a> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>


<script src="../utils.js">

</script>
<script>


class highlightEvent {
    constructor() {
        this.target = es('a')
        this.init()
        this.triggerHighlight()
    }

    init() {
        this.appendHighlightBox()
         this.box = e('.highlight')
    }

    appendHighlightBox() {
        const t = (`
            <span class="highlight"></span>
            `)
        document.body.insertAdjacentHTML('beforeend', t )
    }

    setStyle(rect) {
        let {width, height, top, left, x, y } = rect
        let style = {
            width: `${width}px`,
            height: `${height}px`,
            // transform: `translate(${left  }px, ${top }px)`,
            top: `${top + window.scrollY }px`,
            left: `${left +  window.scrollX}px`,
            // transform: `translateY(50%)`,
        }
        Object.keys(style).map((key) => {
            this.box.style[key] = style[key]
        })
    }

    triggerHighlight() {
        let cls = this
        this.target.forEach((tag) => {
            tag.addEventListener('mouseenter',  (event) => {
                let self = event.target
                let rect = self.getBoundingClientRect()
                cls.setStyle(rect)
            })

            tag.addEventListener('mouseout',  (event) => {
                let self = event.target
                // cls.box.style = ''
            })
        })
    }
}


const __main = () => {
    new highlightEvent()
}

__main()

</script>

</body>
</html>
